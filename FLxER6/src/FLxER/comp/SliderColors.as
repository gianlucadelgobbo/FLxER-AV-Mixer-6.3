package FLxER.comp {	import flash.display.Sprite;	import flash.events.Event;	import flash.events.MouseEvent;	import flash.geom.Rectangle;	import flash.utils.getTimer;		import FLxER.comp.ButtonRett;	import FLxER.main.Rett;	import FLxER.main.Txt;	import FLxER.panels.ChCtrl;		import fl.motion.Color;	public class SliderColors extends Sprite {		private var w:uint;		private var h:uint;		private var myStart:Number;		private var maxVal:Number;		private var minVal:Number;		private var fnz:Function;		private var param:String;		private var alt:String;		///////		private var filo:Rett;		private var path:ButtonRett;		public var lab:Txt;		private var curs:ButtonRett;		//		private var xReset:Number;		private var tmpDC:int;		private var myInt:Number;		//		private var myParent:ChCtrl;		public function SliderColors(xx:Number, yy:Number, ww:uint, hh:uint, c:uint, s:Number, min:Number, max:Number, f:Function, p:String, a:String,pp:ChCtrl):void {			myParent = pp;			x = xx;			y = yy;			w = ww;			h = hh;			myStart = s			maxVal = max;			minVal = min			fnz = f			param = p			alt = a;			this.filo = new Rett(0, 0, w-31, h, 0x999999, -1, 1);			this.addChild(filo);			this.path = new ButtonRett(1, 1, w-33, h-2, pathPress, "true", null, .3);			path.buttonMode = false;			this.addChild(path);						this.lab = new Txt(w-31, 0, 31, 15, "0", Preferences.th, "input", setValNum);			this.addChild(lab);			this.curs = new ButtonRett(1, 1, 6, h-2, myPress, param, alt, 1);			//curs.mouseUpAcivation(myRelease);			curs.buttonMode = false;			var cTint:Color = new Color();			cTint.setTint(c, 1);			curs.transform.colorTransform = cTint;			this.addChild(curs);						myInt = path.width-curs.width;			lab.text = myStart.toString();			curs.x = xReset = (((myStart-minVal)/(maxVal-minVal))*myInt)+path.x;			this.tmpDC = getTimer();		}		private function pathPress(p:String):void {			curs.x = (this.mouseX<=myInt+1 ? this.mouseX : myInt+1);			mySetValue(null);		}		private function mySetValue(p:String):void {			var tmp:String = ((((curs.x-path.x)/myInt)*(maxVal-minVal))+minVal).toString();			lab.text = tmp;			fnz(param,tmp)		}		public function getVal():Number {			return -parseInt(lab.text);		}		public function setVal(p:Number):void {			lab.text = p.toString();			muovi(lab.text);		}		private function setValNum(t:String):void {			myParent.change_ch();			muovi(t)		}		public function muovi(t:String):void {			var tmp:int = parseInt(lab.text);			curs.x = ((tmp-minVal)/(maxVal-minVal))*myInt;			fnz(param, tmp)		}		private function myPress(p:String):void {			myParent.change_ch();			if (getTimer()-this.tmpDC>310) {				curs.startDrag(false, new Rectangle(1, 1, myInt, 0));				stage.addEventListener(Event.ENTER_FRAME, mySetValue)				stage.addEventListener(MouseEvent.MOUSE_UP, myRelease)				//this.addEventListener(MouseEvent.MOUSE_MOVE, mySetValue)			} else {				curs.stopDrag();				curs.x = xReset;				mySetValue(null);			}			this.tmpDC = getTimer();		}		private function myRelease(p:String):void {			curs.stopDrag();			stage.removeEventListener(Event.ENTER_FRAME, mySetValue)			stage.removeEventListener(MouseEvent.MOUSE_UP, myRelease)		}		public function resetta():void {			curs.x = xReset;			mySetValue(null);		}	}}